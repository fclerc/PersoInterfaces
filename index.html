<!DOCTYPE HTML>

<html>
    <head>
        <link href="css/bootstrap.css" type="text/css" rel="stylesheet"/>
        <link href="XMLDisplay.css" type="text/css" rel="stylesheet"/>
        <link href="RulesInterface.css" type="text/css" rel="stylesheet"/>
        
        <style>
        
        </style>
    </head>
    
    <body>
    <div id="Profile" class="mains"></div>
    <div id="Rules" class="mains"></div>
    <div id="Activities" class="mains"></div>
        <script type="text/javascript" src="jquery-2.1.1.js"></script>
        
        <script type="text/javascript" src="xmlManipulator.js"></script>
        <script type="text/javascript">
        
            $(function(){
                
                    manipulateXML('foveaProfile.xml','#Profile', 'select', "#Rules");
                    manipulateXML('foveaResources.xml','#Activities', 'modify', '#Rules');
                    
                    $("#Rules").on("leafValueReading", function(event, value, id, container){
                        $(event.target).append('You clicked on '+id+ ' which contains value ' + value + 'in the '+container+' part.<br/>');
                    
                    });
                    
                    
                //function used to keep the colons always visible when scrolling
                function alwaysVisible(elementId){
                    var initialTop = $(elementId).offset().top;
                
                    $(document).scroll(function(){
                        var bottomWindowPosition = $(document).scrollTop() + $(window).height();
                        
                        if(bottomWindowPosition < $(document).height()){
                            
                            if($(elementId).height() < bottomWindowPosition){
                                if($(elementId).height() > $(window).height()){
                                    $(elementId).css('margin-top',initialTop + bottomWindowPosition - $(elementId).height());
                                }
                                else{
                                    $(elementId).css('margin-top',initialTop + $(document).scrollTop());
                                }
                                
                            }
                            else{
                                $(elementId).css('margin-top',initialTop);
                            }
                        }
                    });
                }
                alwaysVisible('#Rules');
                alwaysVisible('#Profile');
                alwaysVisible('#Activities');
                
            
            });
            
            
        </script>
    </body>


</html>
